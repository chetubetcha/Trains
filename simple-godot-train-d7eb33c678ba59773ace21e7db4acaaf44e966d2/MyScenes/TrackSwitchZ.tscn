[gd_scene load_steps=20 format=2]

[ext_resource path="res://Demo/Assets/crosstie.png" type="Texture" id=1]
[ext_resource path="res://Demo/Assets/track.png" type="Texture" id=2]
[ext_resource path="res://Scripts/TrackJunction.gd" type="Script" id=3]
[ext_resource path="res://Scripts/TrackSwitch.gd" type="Script" id=4]
[ext_resource path="res://Demo/Assets/switch_right.png" type="Texture" id=5]
[ext_resource path="res://Demo/Assets/arrow.png" type="Texture" id=6]
[ext_resource path="res://Demo/Assets/switch_left.png" type="Texture" id=7]
[ext_resource path="res://Scripts/Track.gd" type="Script" id=8]
[ext_resource path="res://Scenes/Track.tscn" type="PackedScene" id=9]

[sub_resource type="Curve2D" id=11]
resource_local_to_scene = true
_data = {
"points": PoolVector2Array( 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 84, 0 )
}

[sub_resource type="ArrayMesh" id=7]
surfaces/0 = {
"aabb": AABB( -1.5, -12.5, 0, 3.00001, 25, 0 ),
"array_data": PoolByteArray( 0, 0, 192, 63, 0, 0, 72, 65, 0, 0, 128, 63, 0, 0, 128, 63, 0, 0, 192, 191, 0, 0, 72, 65, 0, 0, 0, 0, 0, 0, 128, 63, 0, 0, 192, 191, 0, 0, 72, 193, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 192, 63, 0, 0, 72, 193, 0, 0, 128, 63, 0, 0, 0, 0 ),
"array_index_data": PoolByteArray( 3, 0, 0, 0, 1, 0, 1, 0, 2, 0, 3, 0 ),
"blend_shape_data": [  ],
"format": 262417,
"index_count": 6,
"primitive": 4,
"skeleton_aabb": [  ],
"vertex_count": 4
}

[sub_resource type="MultiMesh" id=12]
resource_local_to_scene = true
instance_count = 8
mesh = SubResource( 7 )
transform_2d_array = PoolVector2Array( 1, 0, 0, 1, 4.99681, 0, 1, 0, 0, 1, 15.0078, 0, 1, 0, 0, 1, 24.9981, 0, 1, 0, 0, 1, 34.9789, 0, 1, 0, 0, 1, 44.9878, 0, 1, 0, 0, 1, 54.9744, 0, 1, 0, 0, 1, 64.9706, 0, 1, 0, 0, 1, 74.9787, 0 )

[sub_resource type="Curve2D" id=13]
resource_local_to_scene = true
_data = {
"points": PoolVector2Array( 0, 0, 0, 0, 0, 0, -23.902, -16.0644, 23.902, 16.0644, 64, 16 )
}

[sub_resource type="MultiMesh" id=14]
resource_local_to_scene = true
instance_count = 7
mesh = SubResource( 7 )
transform_2d_array = PoolVector2Array( 0.997947, 0.0640496, -0.0640496, 0.997947, 4.99855, 0.151877, 0.992838, 0.119466, -0.119466, 0.992838, 14.9734, 0.932876, 0.984107, 0.177575, -0.177575, 0.984107, 24.87, 2.26685, 0.96946, 0.245249, -0.245249, 0.96946, 34.6843, 4.20508, 0.944619, 0.32817, -0.32817, 0.944619, 44.3251, 6.85303, 0.901062, 0.433689, -0.433689, 0.901062, 53.6716, 10.3796, 0.838563, 0.544804, -0.544804, 0.838563, 62.5197, 15.0383 )

[sub_resource type="Theme" id=10]
CheckButton/icons/off = ExtResource( 7 )
CheckButton/icons/on = ExtResource( 5 )
CheckButton/styles/normal = null

[sub_resource type="Curve2D" id=15]
resource_local_to_scene = true
_data = {
"points": PoolVector2Array( 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 84, 0 )
}

[sub_resource type="MultiMesh" id=16]
resource_local_to_scene = true
instance_count = 8
mesh = SubResource( 7 )
transform_2d_array = PoolVector2Array( 1, 0, 0, 1, 4.99681, 0, 1, 0, 0, 1, 15.0078, 0, 1, 0, 0, 1, 24.9981, 0, 1, 0, 0, 1, 34.9789, 0, 1, 0, 0, 1, 44.9878, 0, 1, 0, 0, 1, 54.9744, 0, 1, 0, 0, 1, 64.9706, 0, 1, 0, 0, 1, 74.9787, 0 )

[sub_resource type="Curve2D" id=17]
resource_local_to_scene = true
_data = {
"points": PoolVector2Array( 0, 0, 0, 0, 0, 0, -23.902, -16.0644, 23.902, 16.0644, 64, 16 )
}

[sub_resource type="MultiMesh" id=18]
resource_local_to_scene = true
instance_count = 7
mesh = SubResource( 7 )
transform_2d_array = PoolVector2Array( 0.997947, 0.0640496, -0.0640496, 0.997947, 4.99855, 0.151877, 0.992838, 0.119466, -0.119466, 0.992838, 14.9734, 0.932876, 0.984107, 0.177575, -0.177575, 0.984107, 24.87, 2.26685, 0.96946, 0.245249, -0.245249, 0.96946, 34.6843, 4.20508, 0.944619, 0.32817, -0.32817, 0.944619, 44.3251, 6.85303, 0.901062, 0.433689, -0.433689, 0.901062, 53.6716, 10.3796, 0.838563, 0.544804, -0.544804, 0.838563, 62.5197, 15.0383 )

[node name="Z" type="Node2D"]

[node name="1" type="Node2D" parent="."]

[node name="TrackSwitch" type="Node2D" parent="1"]
script = ExtResource( 4 )

[node name="LeftTrack" parent="1/TrackSwitch" instance=ExtResource( 9 )]
curve = SubResource( 11 )
script = ExtResource( 8 )

[node name="Crosstie" parent="1/TrackSwitch/LeftTrack" index="0"]
visible = false
position = Vector2( -8, -16 )
z_index = 1
mesh = SubResource( 7 )
texture = ExtResource( 1 )

[node name="MultiMeshInstance2D" parent="1/TrackSwitch/LeftTrack" index="1"]
z_index = 1
multimesh = SubResource( 12 )
texture = ExtResource( 1 )

[node name="HeadPoint" parent="1/TrackSwitch/LeftTrack" index="2"]
z_index = 3
z_as_relative = false
loop = false

[node name="TrackJunction" parent="1/TrackSwitch/LeftTrack/HeadPoint" index="0" groups=["track_junctions"]]
script = ExtResource( 3 )
parent = NodePath("../../..")
side = "head"

[node name="TailPoint" parent="1/TrackSwitch/LeftTrack" index="3"]
position = Vector2( 84, 0 )
z_index = 3
z_as_relative = false
offset = 84.026
loop = false

[node name="TrackJunction" parent="1/TrackSwitch/LeftTrack/TailPoint" index="0" groups=["track_junctions"]]
script = ExtResource( 3 )
parent = NodePath("../../..")
side = "left"

[node name="Line2D" parent="1/TrackSwitch/LeftTrack" index="4"]
z_index = 2
points = PoolVector2Array( 0, 0, 4.99681, 0, 10.0032, 0, 15.0078, 0, 20.008, 0, 24.9981, 0, 29.9879, 0, 34.9789, 0, 39.9889, 0, 44.9878, 0, 49.9854, 0, 54.9744, 0, 59.9684, 0, 64.9706, 0, 69.9734, 0, 74.9787, 0, 79.974, 0, 84, 0 )
width = 20.0
default_color = Color( 1, 1, 1, 1 )
texture = ExtResource( 2 )
texture_mode = 1

[node name="Pointer" type="PathFollow2D" parent="1/TrackSwitch/LeftTrack"]
visible = false
position = Vector2( 66.7412, 0 )
z_index = 2
offset = 66.7697

[node name="Sprite" type="Sprite" parent="1/TrackSwitch/LeftTrack/Pointer"]
position = Vector2( -55.3343, 5.54886 )
texture = ExtResource( 6 )

[node name="RightTrack" parent="1/TrackSwitch" instance=ExtResource( 9 )]
z_index = 1
curve = SubResource( 13 )
script = ExtResource( 8 )

[node name="Crosstie" parent="1/TrackSwitch/RightTrack" index="0"]
visible = false
position = Vector2( -8, -16 )
z_index = 1
mesh = SubResource( 7 )
texture = ExtResource( 1 )

[node name="MultiMeshInstance2D" parent="1/TrackSwitch/RightTrack" index="1"]
z_index = 1
multimesh = SubResource( 14 )
texture = ExtResource( 1 )

[node name="HeadPoint" parent="1/TrackSwitch/RightTrack" index="2"]
rotation = 0.0276211
z_index = 3
z_as_relative = false
loop = false

[node name="TrackJunction" parent="1/TrackSwitch/RightTrack/HeadPoint" index="0" groups=["track_junctions"]]
script = ExtResource( 3 )
parent = NodePath("../../..")
side = "head"
enabled = false

[node name="TailPoint" parent="1/TrackSwitch/RightTrack" index="3"]
position = Vector2( 64, 16 )
rotation = 0.553597
z_index = 3
z_as_relative = false
offset = 66.7652
loop = false

[node name="TrackJunction" parent="1/TrackSwitch/RightTrack/TailPoint" index="0" groups=["track_junctions"]]
script = ExtResource( 3 )
parent = NodePath("../../..")
side = "right"

[node name="Line2D" parent="1/TrackSwitch/RightTrack" index="4"]
z_index = 2
points = PoolVector2Array( 0, 0, 4.99855, 0.151877, 9.99228, 0.472381, 14.9734, 0.932876, 19.9316, 1.52949, 24.87, 2.26685, 29.793, 3.15517, 34.6843, 4.20508, 39.539, 5.43321, 44.3251, 6.85303, 49.0416, 8.49161, 53.6716, 10.3796, 58.1779, 12.5485, 62.5197, 15.0383, 64, 16 )
width = 20.0
default_color = Color( 1, 1, 1, 1 )
texture = ExtResource( 2 )
texture_mode = 1

[node name="Pointer" type="PathFollow2D" parent="1/TrackSwitch/RightTrack"]
position = Vector2( 63.9966, 15.9978 )
rotation = 0.577729
z_index = 2
offset = 66.7572

[node name="Sprite" type="Sprite" parent="1/TrackSwitch/RightTrack/Pointer"]
position = Vector2( -43.5135, 19.094 )
texture = ExtResource( 6 )

[node name="Button" type="CheckButton" parent="1/TrackSwitch"]
margin_left = -32.0
margin_top = -72.0
margin_right = 44.0
margin_bottom = -24.0
rect_rotation = 90.0
rect_pivot_offset = Vector2( 38, 24 )
focus_mode = 0
theme = SubResource( 10 )
shortcut_in_tooltip = false
pressed = true
keep_pressed_outside = true

[node name="2" type="Node2D" parent="."]
position = Vector2( 125, 30 )
rotation = 3.14159

[node name="TrackSwitch" type="Node2D" parent="2"]
script = ExtResource( 4 )

[node name="LeftTrack" parent="2/TrackSwitch" instance=ExtResource( 9 )]
curve = SubResource( 15 )
script = ExtResource( 8 )

[node name="Crosstie" parent="2/TrackSwitch/LeftTrack" index="0"]
visible = false
position = Vector2( -8, -16 )
z_index = 1
mesh = SubResource( 7 )
texture = ExtResource( 1 )

[node name="MultiMeshInstance2D" parent="2/TrackSwitch/LeftTrack" index="1"]
z_index = 1
multimesh = SubResource( 16 )
texture = ExtResource( 1 )

[node name="HeadPoint" parent="2/TrackSwitch/LeftTrack" index="2"]
z_index = 3
z_as_relative = false
loop = false

[node name="TrackJunction" parent="2/TrackSwitch/LeftTrack/HeadPoint" index="0" groups=["track_junctions"]]
script = ExtResource( 3 )
parent = NodePath("../../..")
side = "head"

[node name="TailPoint" parent="2/TrackSwitch/LeftTrack" index="3"]
position = Vector2( 84, 0 )
z_index = 3
z_as_relative = false
offset = 84.026
loop = false

[node name="TrackJunction" parent="2/TrackSwitch/LeftTrack/TailPoint" index="0" groups=["track_junctions"]]
script = ExtResource( 3 )
parent = NodePath("../../..")
side = "left"

[node name="Line2D" parent="2/TrackSwitch/LeftTrack" index="4"]
z_index = 2
points = PoolVector2Array( 0, 0, 4.99681, 0, 10.0032, 0, 15.0078, 0, 20.008, 0, 24.9981, 0, 29.9879, 0, 34.9789, 0, 39.9889, 0, 44.9878, 0, 49.9854, 0, 54.9744, 0, 59.9684, 0, 64.9706, 0, 69.9734, 0, 74.9787, 0, 79.974, 0, 84, 0 )
width = 20.0
default_color = Color( 1, 1, 1, 1 )
texture = ExtResource( 2 )
texture_mode = 1

[node name="Pointer" type="PathFollow2D" parent="2/TrackSwitch/LeftTrack"]
visible = false
position = Vector2( 66.7412, 0 )
z_index = 2
offset = 66.7697

[node name="Sprite" type="Sprite" parent="2/TrackSwitch/LeftTrack/Pointer"]
position = Vector2( -55.3343, 5.54886 )
texture = ExtResource( 6 )

[node name="RightTrack" parent="2/TrackSwitch" instance=ExtResource( 9 )]
z_index = 1
curve = SubResource( 17 )
script = ExtResource( 8 )

[node name="Crosstie" parent="2/TrackSwitch/RightTrack" index="0"]
visible = false
position = Vector2( -8, -16 )
z_index = 1
mesh = SubResource( 7 )
texture = ExtResource( 1 )

[node name="MultiMeshInstance2D" parent="2/TrackSwitch/RightTrack" index="1"]
z_index = 1
multimesh = SubResource( 18 )
texture = ExtResource( 1 )

[node name="HeadPoint" parent="2/TrackSwitch/RightTrack" index="2"]
rotation = 0.0276211
z_index = 3
z_as_relative = false
loop = false

[node name="TrackJunction" parent="2/TrackSwitch/RightTrack/HeadPoint" index="0" groups=["track_junctions"]]
script = ExtResource( 3 )
parent = NodePath("../../..")
side = "head"
enabled = false

[node name="TailPoint" parent="2/TrackSwitch/RightTrack" index="3"]
position = Vector2( 64, 16 )
rotation = 0.553597
z_index = 3
z_as_relative = false
offset = 66.7652
loop = false

[node name="TrackJunction" parent="2/TrackSwitch/RightTrack/TailPoint" index="0" groups=["track_junctions"]]
script = ExtResource( 3 )
parent = NodePath("../../..")
side = "right"

[node name="Line2D" parent="2/TrackSwitch/RightTrack" index="4"]
z_index = 2
points = PoolVector2Array( 0, 0, 4.99855, 0.151877, 9.99228, 0.472381, 14.9734, 0.932876, 19.9316, 1.52949, 24.87, 2.26685, 29.793, 3.15517, 34.6843, 4.20508, 39.539, 5.43321, 44.3251, 6.85303, 49.0416, 8.49161, 53.6716, 10.3796, 58.1779, 12.5485, 62.5197, 15.0383, 64, 16 )
width = 20.0
default_color = Color( 1, 1, 1, 1 )
texture = ExtResource( 2 )
texture_mode = 1

[node name="Pointer" type="PathFollow2D" parent="2/TrackSwitch/RightTrack"]
position = Vector2( 63.9966, 15.9978 )
rotation = 0.577729
z_index = 2
offset = 66.7572

[node name="Sprite" type="Sprite" parent="2/TrackSwitch/RightTrack/Pointer"]
position = Vector2( -43.5135, 19.094 )
texture = ExtResource( 6 )

[node name="Button" type="CheckButton" parent="2/TrackSwitch"]
margin_left = -32.0
margin_top = -72.0
margin_right = 44.0
margin_bottom = -24.0
rect_rotation = 269.942
rect_pivot_offset = Vector2( 38, 24 )
focus_mode = 0
theme = SubResource( 10 )
shortcut_in_tooltip = false
pressed = true
keep_pressed_outside = true

[connection signal="wheel_at_head" from="1/TrackSwitch/LeftTrack" to="1/TrackSwitch" method="_on_LeftTrack_wheel_at_head"]
[connection signal="wheel_at_tail" from="1/TrackSwitch/LeftTrack" to="1/TrackSwitch" method="_on_LeftTrack_wheel_at_tail"]
[connection signal="area_entered" from="1/TrackSwitch/LeftTrack/HeadPoint/TrackJunction" to="1/TrackSwitch/LeftTrack/HeadPoint/TrackJunction" method="_on_TrackJunction_area_entered"]
[connection signal="area_entered" from="1/TrackSwitch/LeftTrack/TailPoint/TrackJunction" to="1/TrackSwitch/LeftTrack/TailPoint/TrackJunction" method="_on_TrackJunction_area_entered"]
[connection signal="wheel_at_head" from="1/TrackSwitch/RightTrack" to="1/TrackSwitch" method="_on_RightTrack_wheel_at_head"]
[connection signal="wheel_at_tail" from="1/TrackSwitch/RightTrack" to="1/TrackSwitch" method="_on_RightTrack_wheel_at_tail"]
[connection signal="area_entered" from="1/TrackSwitch/RightTrack/HeadPoint/TrackJunction" to="1/TrackSwitch/RightTrack/HeadPoint/TrackJunction" method="_on_TrackJunction_area_entered"]
[connection signal="area_entered" from="1/TrackSwitch/RightTrack/TailPoint/TrackJunction" to="1/TrackSwitch/RightTrack/TailPoint/TrackJunction" method="_on_TrackJunction_area_entered"]
[connection signal="pressed" from="1/TrackSwitch/Button" to="1/TrackSwitch" method="_on_Button_pressed"]
[connection signal="wheel_at_head" from="2/TrackSwitch/LeftTrack" to="2/TrackSwitch" method="_on_LeftTrack_wheel_at_head"]
[connection signal="wheel_at_tail" from="2/TrackSwitch/LeftTrack" to="2/TrackSwitch" method="_on_LeftTrack_wheel_at_tail"]
[connection signal="area_entered" from="2/TrackSwitch/LeftTrack/HeadPoint/TrackJunction" to="2/TrackSwitch/LeftTrack/HeadPoint/TrackJunction" method="_on_TrackJunction_area_entered"]
[connection signal="area_entered" from="2/TrackSwitch/LeftTrack/TailPoint/TrackJunction" to="2/TrackSwitch/LeftTrack/TailPoint/TrackJunction" method="_on_TrackJunction_area_entered"]
[connection signal="wheel_at_head" from="2/TrackSwitch/RightTrack" to="2/TrackSwitch" method="_on_RightTrack_wheel_at_head"]
[connection signal="wheel_at_tail" from="2/TrackSwitch/RightTrack" to="2/TrackSwitch" method="_on_RightTrack_wheel_at_tail"]
[connection signal="area_entered" from="2/TrackSwitch/RightTrack/HeadPoint/TrackJunction" to="2/TrackSwitch/RightTrack/HeadPoint/TrackJunction" method="_on_TrackJunction_area_entered"]
[connection signal="area_entered" from="2/TrackSwitch/RightTrack/TailPoint/TrackJunction" to="2/TrackSwitch/RightTrack/TailPoint/TrackJunction" method="_on_TrackJunction_area_entered"]
[connection signal="pressed" from="2/TrackSwitch/Button" to="2/TrackSwitch" method="_on_Button_pressed"]

[editable path="1/TrackSwitch/LeftTrack"]
[editable path="1/TrackSwitch/RightTrack"]
[editable path="2/TrackSwitch/LeftTrack"]
[editable path="2/TrackSwitch/RightTrack"]
